{"version":3,"sources":["App.js","player.js","../node_modules/subsrt/lib/format sync /^/.//.*/.js$","serviceWorker.js","index.js"],"names":["DB_VERSION","DB_INFO_FILENAME","ALIASES_FILENAME","ORIG_SUBS_FILENAME","VTTS_FILENAME","UPDATE_ALIAS_DELAY","PAGE_SIZE","SCOPES","resolutions","postfix","label","LogoutDialog","state","open","componentDidMount","_this","props","onRef","Object","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_9__","handleClickOpen","setState","handleClose","handleYes","app","initUserVars","gapi","auth2","getAuthInstance","signOut","react__WEBPACK_IMPORTED_MODULE_10___default","a","createElement","_material_ui_core_Dialog__WEBPACK_IMPORTED_MODULE_32___default","this","onClose","aria-labelledby","aria-describedby","_material_ui_core_DialogTitle__WEBPACK_IMPORTED_MODULE_35___default","id","_material_ui_core_DialogContent__WEBPACK_IMPORTED_MODULE_34___default","_material_ui_core_DialogActions__WEBPACK_IMPORTED_MODULE_33___default","_material_ui_core_Button__WEBPACK_IMPORTED_MODULE_29___default","onClick","color","React","Component","TopBar","handleTopLeft","_this2","curPage","logoutDialog","changePage","handleTitle","event","alias","target","value","curItem","aliasTimer","clearTimeout","setTimeout","aliases","filename","updateAliases","render","title","topLeft","classes","_material_ui_core_Typography__WEBPACK_IMPORTED_MODULE_16___default","variant","noWrap","currentUser","get","getBasicProfile","getEmail","albums","length","_material_ui_icons_Menu__WEBPACK_IMPORTED_MODULE_21___default","curAlbum","mediaItems","_material_ui_core_Icon__WEBPACK_IMPORTED_MODULE_14___default","aliasOrTitle","_material_ui_core_InputBase__WEBPACK_IMPORTED_MODULE_18___default","defaultValue","fullWidth","style","onChange","placeholder","className","root","d","_material_ui_core_AppBar__WEBPACK_IMPORTED_MODULE_12___default","position","_material_ui_core_Toolbar__WEBPACK_IMPORTED_MODULE_13___default","_material_ui_core_IconButton__WEBPACK_IMPORTED_MODULE_15___default","menuButton","aria-label","withStyles","theme","width","grow","flexGrow","marginLeft","marginRight","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_helpers_esm_defineProperty__WEBPACK_IMPORTED_MODULE_3__","display","breakpoints","up","search","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","spacing","unit","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","&:focus","App","isSignedIn","_this3","origSubs","vtts","nextResIdx","refreshPlayer","currentTime","_callee2","script","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_1___default","wrap","_context2","prev","next","document","src","onload","window","load","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","mark","_callee","_context","client","init","apiKey","packageJson","API_KEY","clientId","CLIENT_ID","discoveryDocs","DISCOVERY_DOCS","scope","listen","updateSigninStatus","stop","body","appendChild","updateDB","_callee3","dbVersion","proms","result","metaInfoId","metaInfo","isDirty","itemId","drive","response","folderNames","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_iterator","_step","folder","vttFiles","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_iterator2","_step2","vttFile","_context3","dbInfo","version","push","createFile","then","aliasesId","origSubsId","updateOrigSubs","vttsId","updateVtts","Promise","all","listFiles","sent","t0","JSON","getFile","t1","parse","call","delFile","files","list","q","spaces","fields","pageSize","undefined","Symbol","iterator","done","name","t2","return","finish","parents","t3","updateDBInfo","toPut","arguments","toDel","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","x","err","assign","writeFile","dbInfoId","stringify","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","_iteratorNormalCompletion6","_didIteratorError6","_iteratorError6","_step6","_iterator6","handleSigninClick","signIn","handleSignoutClick","handleAlbumClick","album","getMediaItems","handleItemClick","item","getMediaItem","handleDelSubtitle","_callee4","curItemId","origSubId","vttId","_context4","videoPlayer","removeSubtitle","handleDownloadSubtitle","_callee5","origSubMeta","origSub","_context5","getFileMetaInfo","Buffer","data","from","fileDownload","_callee9","res","content","_context9","_ref7","_callee6","_context6","_x2","apply","_ref8","_callee7","_context7","_x3","_ref9","_callee8","_context8","_x4","getAlbums","page","_callee10","pageToken","_context10","request","path","method","params","status","concat","sort","l","r","localeCompare","nextPageToken","console","error","_callee11","albumId","_context11","_callee12","_context12","onDropAccepted","file","reader","FileReader","_ref13","_callee13","buf","oldOrigSubId","oldVttId","encoding","vtt","_context13","arrayBufferToBuffer","chardet","detect","iconv","decode","endsWith","smi2vtt","subsrt","convert","format","replace","updateSubtitle","_x9","readAsArrayBuffer","onDropRejected","playNextRes","_callee14","_context14","abrupt","_callee15","_args15","_context15","_callee16","_context16","Error","_callee17","fileId","_context17","alt","_callee18","_context18","_callee19","_context19","_callee20","_context20","uploadType","_callee21","_context21","Math","floor","demo","_material_ui_core_List__WEBPACK_IMPORTED_MODULE_22___default","map","_material_ui_core_ListItem__WEBPACK_IMPORTED_MODULE_23___default","button","key","_material_ui_core_ListItemIcon__WEBPACK_IMPORTED_MODULE_24___default","_material_ui_icons_Folder__WEBPACK_IMPORTED_MODULE_26___default","_material_ui_core_ListItemText__WEBPACK_IMPORTED_MODULE_25___default","primary","videoItems","_iteratorNormalCompletion7","_didIteratorError7","_iteratorError7","_step7","_iterator7","mimeType","startsWith","videoListRender","_i","_material_ui_core_Grid__WEBPACK_IMPORTED_MODULE_27___default","container","direction","justify","gridContainer","minHeight","_material_ui_core_CardContent__WEBPACK_IMPORTED_MODULE_28___default","gutterBottom","fontSize","sources","i","baseUrl","type","baseStyle","borderWidth","borderColor","borderStyle","activeStyle","xs","padding","_player__WEBPACK_IMPORTED_MODULE_38__","v","react_dropzone__WEBPACK_IMPORTED_MODULE_31__","accept","_ref22","getRootProps","getInputProps","isDragActive","styles","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_helpers_esm_objectSpread__WEBPACK_IMPORTED_MODULE_0__","rightIcon","_material_ui_icons_Delete__WEBPACK_IMPORTED_MODULE_30___default","maxWidth","background","paper","margin","require","videojs","VideoPlayer","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_helpers_esm_assertThisInitialized__WEBPACK_IMPORTED_MODULE_7__","player","videoNode","autoplay","controls","aspectRatio","playbackRates","controlBar","children","on","hotkeys","volumeStep","seekStep","enableModifiersForNumbers","_ref","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Volumes_Data_tmp_Downloads_GPPlayer_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","resolve","reject","subtitle","_x","addRemoteTextTrack","default","srclang","textTracks","mode","removeRemoteTextTrack","dispose","react__WEBPACK_IMPORTED_MODULE_8___default","data-vjs-player","ref","node","./ass.js","./json.js","./lrc.js","./sbv.js","./smi.js","./srt.js","./ssa.js","./sub.js","./vtt.js","webpackContext","req","webpackContextResolve","__webpack_require__","e","code","keys","module","exports","Boolean","location","hostname","match","ReactDOM","react_default","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.43469583.chunk.js","sourcesContent":["import React, { Component } from 'react';\nimport './App.css';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport 'typeface-roboto';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { withStyles } from '@material-ui/core/styles';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport Grid from '@material-ui/core/Grid';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Dropzone from 'react-dropzone';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport iconv from 'iconv-lite';\nimport packageJson from '../package.json';\nimport VideoPlayer from './player';\nimport chardet from 'chardet';\nimport arrayBufferToBuffer from 'arraybuffer-to-buffer';\nimport subsrt from 'subsrt';\nimport smi2vtt from 'smi2vtt/dist/parse';\nimport fileDownload from 'js-file-download';\n\n// Data Structure\nconst DB_VERSION = 1;            // must be incremented by 1 if you changed data structure\nconst DB_INFO_FILENAME = 'dbInfo.json';\n\n\n// constants\nconst ALIASES_FILENAME = 'aliases.json';\nconst ORIG_SUBS_FILENAME = 'origSubs.json';\nconst VTTS_FILENAME = 'vtts.json';\nconst UPDATE_ALIAS_DELAY = 2;   // the time for which postpone remote update. (sec)\nconst PAGE_SIZE = 50;     // # of items to fetch at once\n\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nvar SCOPES = 'https://www.googleapis.com/auth/drive.appdata';\nSCOPES += ' https://www.googleapis.com/auth/photoslibrary.readonly';\n\n// video resolutions\n// Video streaming is not officially supported for now.\n// The following is a trick from Picasa era.\n// '=m37' (1080p)\n// '=m22' (720p)\n// '=m18' (360p)\n// more info: https://wordpress.org/support/topic/google-photos-videos-not-playing-in-any-lightbox-type/    // server part\nconst resolutions = [\n  {postfix: '=m37', label: '1080p'},\n  {postfix: '=m22', label: '720p'},\n  {postfix: '=m18', label: '360p'},\n];\n\nclass LogoutDialog extends React.Component {\n  state = {\n    open: false,\n  };\n\n  componentDidMount = () => this.props.onRef(this)\n  handleClickOpen = () => this.setState({ open: true })\n  handleClose = () => this.setState({ open: false })\n  handleYes = () => {\n    const app = this.props.app;\n    this.setState({ open: false });\n    app.initUserVars();\n    app.gapi.auth2.getAuthInstance().signOut();\n  }\n\n  render() {\n    return (\n      <Dialog\n        open={this.state.open}\n        onClose={this.handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Logout?\"}</DialogTitle>\n        <DialogContent>\n          {/* <DialogContentText id=\"alert-dialog-description\">\n            -\n          </DialogContentText> */}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.handleYes} color=\"primary\">\n            Yes\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nconst topBarStyles = theme => ({\n  root: {\n    width: '100%',\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing.unit,\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    width: theme.spacing.unit * 9,\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n    width: '100%',\n  },\n  inputInput: {\n    paddingTop: theme.spacing.unit,\n    paddingRight: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 10,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 120,\n      '&:focus': {\n        width: 200,\n      },\n    },\n  },\n});\n\nclass TopBar extends Component {\n  handleTopLeft = () => {\n    const app = this.props.app;\n    if(app.state.curPage === 'main') {\n      this.logoutDialog.setState({open: true});\n    } else if(app.state.curPage === 'album') {\n      app.changePage('main');\n    } else if(app.state.curPage === 'play') {\n      app.changePage('album');\n    }\n  }\n\n  handleTitle = event => {\n    const alias = event.target.value;\n    const app = this.props.app;\n    const curItem = app.state.curItem;\n\n    // cancel previous timer\n    if(this.aliasTimer)   clearTimeout(this.aliasTimer);\n\n    // set new one\n    this.aliasTimer = setTimeout(() => {\n      let aliases = {};\n      aliases[curItem.id] = alias || curItem.filename;\n      app.updateAliases(aliases);\n\n      // reinit\n      this.aliasTimer = null;\n    }, UPDATE_ALIAS_DELAY*1000);\n  }\n\n  render = () => {\n    const {classes} = this.props;\n    const app = this.props.app;\n  \n    // set title, top-left icon\n    let title, topLeft;\n    if(app.state.curPage === 'main') {\n      const auth2 =  app.gapi.auth2.getAuthInstance();\n      title = (\n        <Typography variant=\"h6\" color=\"inherit\" noWrap>\n          {auth2.currentUser.get().getBasicProfile().getEmail()} ({app.state.albums.length})\n        </Typography>\n      );\n      topLeft = <MenuIcon />;\n    } else if(app.state.curPage === 'album') {\n      title = (\n        <Typography variant=\"h6\" color=\"inherit\" noWrap>\n          {app.state.curAlbum.title} ({app.state.mediaItems.length})\n        </Typography>\n      );\n      topLeft = <Icon>arrow_back</Icon>;\n    } else if(app.state.curPage === 'play') {\n      // curItem may not set in the first place\n      if(app.state.curItem) {\n        const curItem = app.state.curItem;\n        const aliasOrTitle = app.state.aliases[curItem.id] || app.state.curItem.filename;\n        title = (\n          <InputBase\n            defaultValue={aliasOrTitle}\n            fullWidth\n            style={{color:'inherit'}}\n            onChange={event => this.handleTitle(event)}\n            placeholder={app.state.curItem.filename}\n          />\n        );\n      }\n      topLeft = <Icon>arrow_back</Icon>;\n    }\n    \n    return (\n      <div className={classes.root}>\n        <LogoutDialog onRef={d => {this.logoutDialog = d}} app={this.props.app} />\n        <AppBar position=\"fixed\">\n          <Toolbar>\n            <IconButton\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"Open drawer\"\n              onClick={() => this.handleTopLeft()}\n            >\n              {topLeft}\n            </IconButton>\n            {title}\n            {/* <div className={classes.grow} />\n            <div className={classes.search}>\n              <div className={classes.searchIcon}>\n                <SearchIcon />\n              </div>\n              <InputBase\n                placeholder=\"Search…\"\n                classes={{\n                  root: classes.inputRoot,\n                  input: classes.inputInput,\n                }}\n              />\n            </div> */}\n          </Toolbar>\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nTopBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nTopBar = withStyles(topBarStyles)(TopBar);\n\nconst appStyles = theme => ({\n  root: {\n    flexGrow: 1,\n    maxWidth: '96vw',\n  },\n  demo: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  title: {\n    margin: `${theme.spacing.unit * 4}px 0 ${theme.spacing.unit * 2}px`,\n  },\n});\n\nclass App extends Component {\n  state = {\n    isSignedIn: false,\n    curPage: 'loading',\n  }\n\n  initUserVars = () => {\n    // intermediate storage for performance\n    this.albums = [];\n    this.mediaItems = [];\n    this.aliases = {};\n    this.origSubs = {};\n    this.vtts = {};\n\n    return this.setState({\n      albums: [],\n      curAlbum: {},\n      mediaItems: [],\n      curItem: null,\n      nextResIdx: 0,            // resolution index to try\n      refreshPlayer: false,     // a trigger to refresh video player\n      currentTime: 0,           // current playing time\n      aliases: {},    // {itemId: '<alias>'}\n      origSubs: {},    // {itemId: '<origSubId>'} ; original subtitles\n      vtts: {},    // {itemId: '<vttId>'} ; captions\n    });\n  }\n\n  componentDidMount = async () => {\n    // init user variables\n    await this.initUserVars();\n    \n    // The same as state.albums.\n    // This is intermediate storage for fetching all albums.\n    this.albums = [];\n  \n    let script;\n\n    // google apis\n    script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/api.js';\n    script.onload = () => {\n      this.gapi = window.gapi;\n      this.gapi.load('client:auth2', async () => {\n        // init\n        await this.gapi.client.init({\n          apiKey: packageJson.API_KEY,\n          clientId: packageJson.CLIENT_ID,\n          discoveryDocs: packageJson.DISCOVERY_DOCS,\n          scope: SCOPES,\n        });\n        \n        // Set listener\n        this.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n\n        // Handle the initial sign-in state.\n        this.updateSigninStatus(this.gapi.auth2.getAuthInstance().isSignedIn.get());\n      });\n    };\n    document.body.appendChild(script);\n  }\n\n  // update data structure from old version to the current one\n  updateDB = async () => {\n    let dbVersion = this.dbInfo.version;\n\n    if(dbVersion === 0) {\n      let proms = [];\n      // generate meta files\n      proms.push(this.createFile(ALIASES_FILENAME).then(id => {\n        this.aliasesId = id;\n        this.aliases = {};\n        return this.updateAliases({});\n      }));\n      proms.push(this.createFile(ORIG_SUBS_FILENAME).then(id => {\n        this.origSubsId = id;\n        this.origSubs = {};\n        return this.updateOrigSubs({});\n      }));\n      proms.push(this.createFile(VTTS_FILENAME).then(id => {\n        this.vttsId = id;\n        this.vtts = {};\n        return this.updateVtts({});\n      }));\n      await Promise.all(proms);\n\n      // decompose meta.json\n      const METAINFO_FILENAME = 'meta.json';\n      const result = await this.listFiles(METAINFO_FILENAME);\n      if(result.length > 0) {\n        const metaInfoId = result[0].id;\n\n        // extract alises\n        const metaInfo = JSON.parse(await this.getFile(metaInfoId));\n        let aliases = {}, isDirty = false;\n        for(const itemId in metaInfo) {\n          if(metaInfo[itemId].alias) {\n            aliases[itemId] = metaInfo[itemId].alias;\n            isDirty = true;\n          }\n        }\n  \n        // update aliases\n        if(isDirty) {\n          await this.updateAliases(aliases);\n        }\n  \n        // delete meta.json\n        this.delFile(metaInfoId);\n      }\n\n      // list folders\n      const drive = this.gapi.client.drive;\n      const response = await drive.files.list({\n        q: 'mimeType=\"application/vnd.google-apps.folder\"',\n        spaces: 'appDataFolder',\n        fields: 'files(id, name)',\n        pageSize: 1000,\n      });\n      let folderNames = {};\n      for(const folder of response.result.files) {\n        folderNames[folder.id] = folder.name;\n      }\n  \n      // find vtts\n      let vtts = {};\n      const vttFiles = await this.listFiles('captions.vtt');\n      for(const vttFile of vttFiles) {\n        vtts[folderNames[vttFile.parents[0]]] = vttFile.id;\n      }\n      await this.updateVtts(vtts);\n\n      // increment version\n      dbVersion++;\n    }\n\n    // update db info\n    await this.updateDBInfo({version: dbVersion});\n  }\n\n  updateDBInfo = (toPut={}, toDel=[]) => {\n    // delete\n    for(const x of toDel) {\n      delete this.dbInfo[x];\n    }\n\n    // put\n    Object.assign(this.dbInfo, toPut);\n    // this.setState({dbInfo: this.dbInfo});\n    this.writeFile(this.dbInfoId, JSON.stringify(this.dbInfo));\n  }\n\n  updateAliases = (toPut={}, toDel=[]) => {\n    // delete\n    for(const x of toDel) {\n      delete this.aliases[x];\n    }\n\n    // put\n    Object.assign(this.aliases, toPut);\n    this.setState({aliases: this.aliases});\n    return this.writeFile(this.aliasesId, JSON.stringify(this.aliases));\n  }\n\n  updateVtts = (toPut={}, toDel=[]) => {\n    // delete\n    for(const x of toDel) {\n      delete this.vtts[x];\n    }\n\n    // put\n    Object.assign(this.vtts, toPut);\n    this.setState({vtts: this.vtts});\n    return this.writeFile(this.vttsId, JSON.stringify(this.vtts));\n  }\n\n  updateOrigSubs = (toPut={}, toDel=[]) => {\n    // delete\n    for(const x of toDel) {\n      delete this.origSubs[x];\n    }\n\n    // put\n    Object.assign(this.origSubs, toPut);\n    this.setState({origSubs: this.origSubs});\n    return this.writeFile(this.origSubsId, JSON.stringify(this.origSubs));\n  }\n\n  handleSigninClick = event => this.gapi.auth2.getAuthInstance().signIn()\n  handleSignoutClick = event => this.gapi.auth2.getAuthInstance().signOut()\n  handleAlbumClick = album => {\n    this.getMediaItems(album.id);\n    this.setState({curAlbum: album});\n    this.changePage('album');\n  }\n  handleItemClick = item => {\n    this.getMediaItem(item.id);\n    this.changePage('play');\n  }\n  handleDelSubtitle = async () => {\n    const curItemId = this.state.curItem.id;\n    const origSubId = this.state.origSubs[curItemId];\n    const vttId = this.state.vtts[curItemId];\n    \n    // delete subtitles\n    if(origSubId) this.delFile(origSubId);\n    if(vttId)     this.delFile(vttId);\n\n    // unlink references\n    this.updateOrigSubs({}, [curItemId]);\n    this.updateVtts({}, [curItemId]);\n\n    // update player on the fly\n    if(this.state.curPage === 'play') {\n      this.videoPlayer.removeSubtitle();\n    }\n  }\n  handleDownloadSubtitle = async () => {\n    const origSubId = this.state.origSubs[this.state.curItem.id];\n    const origSubMeta = await this.getFileMetaInfo(origSubId);\n    const origSub = Buffer.from(JSON.parse(await this.getFile(origSubId)).data);\n    fileDownload(origSub, origSubMeta.name);\n  }\n  \n  updateSigninStatus = async isSignedIn => {\n    if(isSignedIn) {\n      // check necessity for upgrading\n      const res = await this.listFiles(DB_INFO_FILENAME);\n      if(res.length > 0) {\n        // found\n        this.dbInfoId = res[0].id;\n        let content = await this.getFile(this.dbInfoId) || \"{}\";\n        this.dbInfo = JSON.parse(content);\n        if(this.dbInfo.version === undefined) {\n          this.dbInfo.version = 0;\n        }\n      } else {\n        // not found\n        this.dbInfo = {};\n        this.dbInfoId = await this.createFile(DB_INFO_FILENAME);\n        await this.updateDBInfo({version: 0});\n      }\n      if(this.dbInfo.version < DB_VERSION) {\n        // update data structure\n        await this.updateDB();\n      }\n\n      // fetch meta info\n      let proms = [];\n      proms.push(this.listFiles(ALIASES_FILENAME).then(async res => {\n        this.aliasesId = res[0].id;\n        this.aliases = JSON.parse(await this.getFile(this.aliasesId));\n        this.setState({aliases: this.aliases});\n      }));\n      proms.push(this.listFiles(ORIG_SUBS_FILENAME).then(async res => {\n        this.origSubsId = res[0].id;\n        this.origSubs = JSON.parse(await this.getFile(this.origSubsId));\n        this.setState({origSubs: this.origSubs});\n      }));\n      proms.push(this.listFiles(VTTS_FILENAME).then(async res => {\n        this.vttsId = res[0].id;\n        this.vtts = JSON.parse(await this.getFile(this.vttsId));\n        this.setState({vtts: this.vtts});\n      }));\n      await Promise.all(proms);\n\n      // go to main page\n      this.changePage('main');\n\n      // fetch album list\n      this.getAlbums();\n    } else {\n      this.changePage('signin');\n    }\n    this.setState({isSignedIn});\n  }\n\n  changePage = page => {\n    let state = {curPage: page};\n    const curPage = this.state.curPage;\n\n    // intermediate processings\n    if(curPage === 'album' && page === 'main') {\n      //-- from album to main --//\n      state.mediaItems = [];\n    } else if(curPage === 'play') {\n      //-- leaving play --//\n      state.curItem = null;\n      state.nextResIdx = 0;\n    }\n\n    this.setState(state);\n  }\n\n  getAlbums = async pageToken => {\n    let response;\n    \n    if(pageToken) {\n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/albums',\n        method: 'GET',\n        params: {pageToken, pageSize: PAGE_SIZE},\n      });\n    } else {\n      // init\n      this.albums = [];\n\n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/albums',\n        method: 'GET',\n        params: {pageSize: PAGE_SIZE},\n      });\n    }\n\n    // response\n    if(response.status === 200) {\n      //-- success --//\n      // append to previous one\n      if(response.result.albums) {\n        this.albums = this.albums.concat(response.result.albums);\n  \n        // sort\n        this.albums.sort((l, r) => ('' + l.title).localeCompare(r.title));\n  \n        // save\n        this.setState({albums: this.albums});\n  \n        // request next page\n        if(response.result.nextPageToken) {\n          this.getAlbums(response.result.nextPageToken);\n        }\n      }\n    } else {\n      //-- error --//\n      console.error(response);\n    }\n  }\n\n  getMediaItems = async (albumId, pageToken) => {\n    let response;\n\n    if(pageToken) {\n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/mediaItems:search',\n        method: 'POST',\n        params: {albumId, pageToken, pageSize: PAGE_SIZE},\n      });\n    } else {\n      // init\n      this.mediaItems = [];\n      \n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/mediaItems:search',\n        method: 'POST',\n        params: {albumId, pageSize: PAGE_SIZE},\n      });\n    }\n\n    // response\n    if(response.status === 200) {\n      //-- success --//\n      const mediaItems = response.result.mediaItems;\n\n      // append to previous one\n      this.mediaItems = this.mediaItems.concat(mediaItems);\n\n      // save\n      this.setState({mediaItems: this.mediaItems});\n\n      // request next page\n      if(response.result.nextPageToken) {\n        this.getMediaItems(albumId, response.result.nextPageToken);\n      }\n    } else {\n      //-- error --//\n      console.error(response);\n    }\n  }\n\n  getMediaItem = async itemId => {\n    const response = await this.gapi.client.request({\n      path: 'https://photoslibrary.googleapis.com/v1/mediaItems/' + itemId,\n      method: 'GET',\n    });\n    if(response.status === 200) {\n      //-- success --//\n      this.setState({curItem: response.result});\n    } else {\n      //-- error --//\n      console.error(response);\n    }\n  }\n\n  onDropAccepted = files => {\n    const file = files[0];\n    const reader = new FileReader();\n\n    reader.onload = async event => {\n      let buf = arrayBufferToBuffer(reader.result);\n      const curItemId = this.state.curItem.id;\n      const oldOrigSubId = this.state.origSubs[curItemId];\n      const oldVttId = this.state.vtts[curItemId];\n\n      // upload original subtitle\n      const origSubId = await this.createFile(file.name);\n      await this.writeFile(origSubId, buf);\n      let origSubs = {};\n      origSubs[curItemId] = origSubId;\n      this.updateOrigSubs(origSubs);\n\n      // figure out encoding\n      const encoding = chardet.detect(buf);\n      \n      // adjust encoding\n      buf = iconv.decode(buf, encoding);\n      \n      // convert to .vtt\n      let vtt;\n      if(file.name.endsWith('.smi')) {\n        vtt = smi2vtt(buf);\n      } else {\n        vtt = subsrt.convert(buf, {format: 'vtt'});\n      }\n      \n      // `subsrt` produces timestamp using comma(,). Fix it.\n      vtt = vtt.replace(/([0-9]),([0-9])/g, '$1.$2');\n\n      // upload vtt\n      const vttId = await this.createFile(file.name + '.vtt');\n      await this.writeFile(vttId, vtt);\n      let vtts = {};\n      vtts[curItemId] = vttId;\n      this.updateVtts(vtts);\n      \n      // update subtitle on the fly\n      if(this.state.curPage === 'play') {\n        this.videoPlayer.updateSubtitle(vtt);\n      }\n\n      // dispose of old files\n      if(oldOrigSubId)  this.delFile(oldOrigSubId);\n      if(oldVttId)      this.delFile(oldVttId);\n    }\n\n    reader.readAsArrayBuffer(file);\n  }\n\n  onDropRejected = files => {\n    console.error('Rejected:', files);\n  }\n\n  playNextRes = async () => {\n    await this.setState({nextResIdx: this.state.nextResIdx+1});\n    return this.refreshPlayer();\n  }\n\n  refreshPlayer = async (currentTime=0) => {\n    // unmount video player\n    await this.setState({refreshPlayer: true, currentTime});\n\n    // remount\n    return this.setState({refreshPlayer: false});\n  }\n\n  listFiles = async filename => {\n    const drive = this.gapi.client.drive;\n\n    // check if the folder exists\n    const response = await drive.files.list({\n      q: 'name=\"' + filename + '\"',\n      spaces: 'appDataFolder',\n      fields: 'files(id, parents)',\n      pageSize: 1000,\n    });\n    if(response.status === 200) {\n      return response.result.files;\n    } else {\n      console.error(response);\n      throw new Error(response);\n    }\n  }\n\n  // get the file content\n  getFile = async fileId => {\n    const drive = this.gapi.client.drive;\n    let content='';\n    \n    // download\n    const response = await drive.files.get({fileId, alt: 'media'});\n    switch(response.status) {\n      case 200:\n        content = response.body;\n        break;\n      default:\n        console.error(response);\n        throw new Error(response);\n    }\n\n    return content;\n  }\n\n  // get meta data of single file\n  getFileMetaInfo = async fileId => {\n    const drive = this.gapi.client.drive;\n    let content={};\n    \n    // download\n    const response = await drive.files.get({fileId});\n    switch(response.status) {\n      case 200:\n        content = JSON.parse(response.body);\n        break;\n      default:\n        console.error(response);\n        throw new Error(response);\n    }\n\n    return content;\n  }\n\n  createFile = async filename => {\n    const drive = this.gapi.client.drive;\n\n    const response = await drive.files.create({\n      name: filename,\n      parents: ['appDataFolder'],\n    });\n    switch(response.status) {\n      case 200:\n        return response.result.id;\n      default:\n        console.error(response);\n        throw new Error(response);\n    }\n  }\n\n  writeFile = async (fileId, body) => {\n    const response = await this.gapi.client.request({\n      path: '/upload/drive/v3/files/' + fileId,\n      method: 'PATCH',\n      params: {\n        uploadType: 'media'\n      },\n      body,\n    });\n    if(response.status !== 200) {\n      console.error(response);\n      throw new Error(response);\n    }\n  }\n\n  delFile = async fileId => {\n    const response = await this.gapi.client.request({\n      path: '/drive/v3/files/' + fileId,\n      method: 'DELETE',\n    });\n    if(Math.floor(response.status/100) !== 2 && response.status !== 404) {\n      console.error(response);\n      throw new Error(response);\n    }\n  }\n\n  render = () => {\n    const { classes } = this.props;\n    let content;\n\n    if(this.state.curPage === 'loading') {\n      content = (<div>Loading</div>);\n    } else if(this.state.curPage === 'signin') {\n      content = (\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={() => this.handleSigninClick()}\n        >\n          Sign In\n        </Button>\n      );\n    } else if(this.state.curPage === 'main') {\n      //-- list albums --//\n      if(this.state.albums.length > 0) {\n        //-- album exists --//\n        content = (\n          <div>\n            <TopBar app={this}/>\n            <div className={classes.demo}>\n              <List>\n                {this.state.albums.map(album =>\n                  <ListItem\n                    button\n                    onClick={() => this.handleAlbumClick(album)}\n                    key={album.id}\n                  >\n                    <ListItemIcon>\n                      <FolderIcon />\n                    </ListItemIcon>\n                    <ListItemText\n                      primary={album.title}\n                    />\n                  </ListItem>\n                )}\n              </List>\n            </div>\n          </div>\n        );\n      } else {\n        //-- album doesn't exists --//\n        content = (\n          <div>\n            <TopBar app={this}/>\n            <div className={classes.demo}>\n              비었음.\n            </div>\n          </div>\n        );\n      }\n    } else if(this.state.curPage === 'album') {\n      //-- list video items --//\n      let mediaItems = this.state.mediaItems;\n\n      // filter out non-video items\n      let videoItems = [];\n      for(let item of mediaItems) {\n        if(item.mimeType.startsWith('video')) {\n          videoItems.push(item);\n        }\n      }\n\n      // attach aliases\n      const aliases = this.state.aliases;\n      for(let item of videoItems) {\n        if(item.mimeType.startsWith('video')) {\n          if(item.id in aliases) {\n            item.alias = aliases[item.id];\n          }\n        }\n      }\n\n      // sort\n      videoItems.sort((l, r) => (\n        '' + (l.alias || l.filename)).localeCompare(r.alias || r.filename)\n      );\n\n      // build video list rendering\n      let videoListRender;\n      if(videoItems.length > 0) {\n        // more than 0 items\n        videoListRender = (\n          <List>\n            {videoItems.map(item =>\n              <ListItem\n                button\n                onClick={() => this.handleItemClick(item)}\n                key={item.id}\n              >\n                <ListItemIcon>\n                  <Icon>movie</Icon>\n                </ListItemIcon>\n                <ListItemText\n                  primary={item.alias || item.filename}\n                />\n              </ListItem>\n            )}\n          </List>\n        );\n      } else {\n        // no item\n        videoListRender = (\n          <Grid\n            container\n            direction='column'\n            justify='space-between'\n            alignItems='center'\n            className={classes.gridContainer}\n            style={{minHeight: '100vh'}}\n          >\n            <Grid item></Grid>\n            <Grid item>\n              <CardContent>\n                <Typography gutterBottom style={{fontSize: '10vw'}}>\n                  텅 비었음!\n                </Typography>\n              </CardContent>\n            </Grid>\n            <Grid item></Grid>\n          </Grid>\n        );\n      }\n\n      // list media items in an album\n      content = (\n        <div>\n          <TopBar app={this} />\n          <div className={classes.demo}>\n            {videoListRender}\n          </div>\n        </div>\n      );\n    } else if(this.state.curPage === 'play') {\n      //-- play the video --//\n      if(this.state.curItem) {\n        if(this.state.nextResIdx >= resolutions.length) {\n          //-- no resolution available --//\n          content = (\n            <div>\n              <TopBar app={this} />\n              <div>영상 제작 중...</div>\n            </div>\n          );\n        } else {\n          //-- resolutions available --//\n          // setup sources\n          const item = this.state.curItem;\n          let sources = [];\n          for(let i=this.state.nextResIdx;i<resolutions.length;i++) {\n            sources.push({\n              src: item.baseUrl + resolutions[i].postfix,\n              type: item.mimeType,\n              label: resolutions[i].label,\n            });\n          }\n  \n          // dropzone styles\n          const baseStyle = {\n            // width: 480,\n            height: 100,\n            borderWidth: 5,\n            borderColor: '#666',\n            borderStyle: 'dashed',\n            borderRadius: 5\n          };\n          const activeStyle = {\n            borderStyle: 'solid',\n            borderColor: '#6c6',\n            backgroundColor: '#eee'\n          };\n  \n          content = (\n            <div>\n              <TopBar app={this} />\n              <div className={classes.demo}>\n                <Grid\n                  container\n                  direction='row'\n                  justify='space-evenly'\n                  alignItems='center'\n                  className={classes.gridContainer}\n                >\n                  <Grid item xs={12} style={{padding:10}}>\n                    {!this.state.refreshPlayer &&\n                      <VideoPlayer\n                        onRef={v => {this.videoPlayer = v}}\n                        sources={sources} app={this}\n                      />\n                    }\n                  </Grid>\n                  <Grid item xs={8} style={{padding:10}}>\n                    <Dropzone\n                      accept={['.smi', '.srt', '.vtt']}\n                      onDropAccepted={this.onDropAccepted}\n                      onDropRejected={this.onDropRejected}\n                    >\n                      {({getRootProps, getInputProps, isDragActive}) => {\n                        let styles = {...baseStyle};\n                        styles = isDragActive ? {...styles, ...activeStyle} : styles;\n                        return (\n                          <div\n                            {...getRootProps()}\n                            style={styles}\n                          >\n                            <input {...getInputProps()} />\n                            <Grid\n                              container\n                              justify='center'\n                              alignItems='center'\n                              style={{height:'100%'}}\n                            >\n                              <Grid item>\n                                <Typography variant=\"h4\">\n                                  <Icon fontSize='large'>subtitles</Icon>\n                                  {this.state.vtts[item.id] ? '자막 있음' : '자막 끌어놓기'}\n                                </Typography>\n                              </Grid>\n                            </Grid>\n                          </div>\n                        )\n                      }}\n                    </Dropzone>\n                  </Grid>\n                  <Grid item xs={4}>\n                    {this.state.origSubs[item.id] &&\n                      <Button\n                        variant=\"outlined\"\n                        color=\"default\"\n                        onClick={() => this.handleDownloadSubtitle()}\n                      >\n                        <Icon className={classes.rightIcon}>archive</Icon>\n                        자막 다운\n                      </Button>\n                    }\n                    {this.state.vtts[item.id] &&\n                      <Button\n                        variant=\"outlined\"\n                        color=\"secondary\"\n                        onClick={() => this.handleDelSubtitle()}\n                      >\n                        <DeleteIcon className={classes.rightIcon} />\n                        자막 삭제\n                      </Button>\n                    }\n                  </Grid>\n                </Grid>\n              </div>\n            </div>\n          );\n        }\n      } else {\n        content = (\n          <div>\n            <TopBar app={this} />\n            <div>불러오는 중</div>\n          </div>\n        );\n      }\n    }\n    \n    return (\n      <div className=\"App\">\n        <div style={{height: 56}}></div>\n        {content}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(appStyles)(App);","import React from 'react';\nimport './App.css';\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\nimport 'videojs-hotkeys/videojs.hotkeys';\n\n// The following registers the plugin with `videojs`\nrequire('silvermine-videojs-quality-selector')(videojs);\n\nclass VideoPlayer extends React.Component {\n  componentDidMount = () => {\n    this.props.onRef(this);\n    const app = this.props.app;\n    \n    this.player = videojs(this.videoNode, {\n      autoplay: true,\n      controls: true,\n      sources: this.props.sources,\n      aspectRatio: '16:9',\n      playbackRates: [0.5, 1, 1.25, 1.5, 2],\n      controlBar: {\n        // refer to 'Default Component Tree' section\n        // at https://docs.videojs.com/tutorial-components.html\n        children: [\n          'playToggle',\n          'volumePanel',\n          // 'currentTimeDisplay',\n          // 'durationDisplay',\n          'progressControl',\n          'subtitlesButton',\n          // 'CaptionsButton',\n          'playbackRateMenuButton',\n          'qualitySelector',\n          'fullscreenToggle',\n        ],\n      },\n    });\n\n    this.player.on('ready', () => {\n      // hotkey\n      this.player.hotkeys({\n        volumeStep: 0.1,\n        seekStep: 5,\n        enableModifiersForNumbers: false,\n      });\n\n      // set current time\n      if(app.state.currentTime) {\n        this.player.currentTime(app.state.currentTime);\n      }\n      \n      // vtt\n      new Promise(async (resolve, reject) => {\n        const vttId = app.state.vtts[app.state.curItem.id];\n        if(vttId) {\n          const subtitle = await app.getFile(vttId);\n          if(subtitle) {\n            this.updateSubtitle(subtitle);\n          } else {\n            //-- empty subtitle --//\n            app.handleDelSubtitle();\n          }\n        }\n        resolve();\n      });\n    });\n    \n    this.player.on('error', err => {\n      console.error(err);\n      const currentTime = this.player.currentTime();\n      if(currentTime > 2) {\n        //-- error during playing --//\n        // try with the same resolution\n        app.refreshPlayer(currentTime);\n      } else {\n        //-- current resolution is not available --//\n        // try with next resolution\n        app.playNextRes();\n      }\n    });\n  }\n\n  updateSubtitle = subtitle => {\n    // remove previous one\n    this.removeSubtitle();\n\n    // use data url\n    this.player.addRemoteTextTrack({\n      src: 'data:text/plain,' + subtitle,\n      default: true,\n      srclang: 'ko',\n    }, false);\n\n    // show the new one\n    let textTracks = this.player.textTracks();\n    textTracks[0].mode = 'showing';\n\n    // update for app\n    this.props.app.setState({subtitle});\n  }\n\n  removeSubtitle = () => {\n    let textTracks = this.player.textTracks();\n    if(textTracks.length > 0) {\n      this.player.removeRemoteTextTrack(textTracks[0]);\n    }\n  }\n\n  // destroy player on unmount\n  componentWillUnmount() { if (this.player) this.player.dispose() }\n\n  render() {\n    // wrap the player in a div with a `data-vjs-player` attribute\n    // so videojs won't create additional wrapper in the DOM\n    // see https://github.com/videojs/video.js/pull/3856\n    return (\n      <div>\n        <div data-vjs-player>\n          <video\n            ref={ node => this.videoNode = node }\n            className=\"video-js\"\n            style={{fontSize: '13px'}}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default VideoPlayer;","var map = {\n\t\"./ass.js\": 250,\n\t\"./json.js\": 251,\n\t\"./lrc.js\": 252,\n\t\"./sbv.js\": 253,\n\t\"./smi.js\": 254,\n\t\"./srt.js\": 255,\n\t\"./ssa.js\": 103,\n\t\"./sub.js\": 256,\n\t\"./vtt.js\": 257\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 249;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}
{"version":3,"sources":["../node_modules/subsrt/lib/format sync /^/.//.*/.js$","player.js","App.js","serviceWorker.js","index.js"],"names":["map","./ass.js","./json.js","./lrc.js","./sbv.js","./smi.js","./srt.js","./ssa.js","./sub.js","./vtt.js","webpackContext","req","id","webpackContextResolve","__webpack_require__","e","Error","code","keys","Object","resolve","module","exports","require","videojs","VideoPlayer","componentDidMount","_this","props","onRef","assertThisInitialized","app","player","videoNode","autoplay","controls","sources","aspectRatio","playbackRates","controlBar","children","on","hotkeys","volumeStep","seekStep","enableModifiersForNumbers","Promise","_ref","asyncToGenerator","regenerator_default","a","mark","_callee","reject","folderId","subtitleId","subtitle","wrap","_context","prev","next","getFolderId","state","curItem","sent","getSubtitleId","getSubtitle","updateSubtitle","stop","_x","_x2","apply","this","arguments","err","console","error","playNextRes","textTracks","length","removeRemoteTextTrack","addRemoteTextTrack","src","default","srclang","mode","setState","dispose","_this2","react_default","createElement","data-vjs-player","ref","node","className","style","fontSize","React","Component","SCOPES","resolutions","postfix","label","METAINFO_FILENAME","SUBTITLE_FILENAME","UPDATE_ALIAS_DELAY","LogoutDialog","open","handleClickOpen","handleClose","handleYes","initUserVars","gapi","auth2","getAuthInstance","signOut","Dialog_default","onClose","aria-labelledby","aria-describedby","DialogTitle_default","DialogContent_default","DialogActions_default","Button_default","onClick","color","TopBar","handleTopLeft","curPage","logoutDialog","changePage","handleTitle","event","alias","target","value","setAlias","filename","render","title","topLeft","classes","Typography_default","variant","noWrap","currentUser","get","getBasicProfile","getEmail","albums","Menu_default","curAlbum","mediaItems","Icon_default","curItemMeta","metaInfo","aliasOrTitle","InputBase_default","defaultValue","fullWidth","onChange","placeholder","root","App_LogoutDialog","d","AppBar_default","position","Toolbar_default","IconButton_default","menuButton","aria-label","withStyles","theme","width","grow","flexGrow","marginLeft","marginRight","defineProperty","display","breakpoints","up","search","borderRadius","shape","backgroundColor","fade","palette","common","white","&:hover","spacing","unit","searchIcon","height","pointerEvents","alignItems","justifyContent","inputRoot","inputInput","paddingTop","paddingRight","paddingBottom","paddingLeft","transition","transitions","create","&:focus","App","isSignedIn","_this3","nextResIdx","refreshPlayer","script","document","onload","window","load","client","init","apiKey","packageJson","API_KEY","clientId","CLIENT_ID","discoveryDocs","DISCOVERY_DOCS","scope","listen","updateSigninStatus","body","appendChild","handleSigninClick","signIn","handleSignoutClick","handleAlbumClick","album","getMediaItems","handleItemClick","item","getMediaItem","handleDelSubtitleClick","_callee2","_context2","abrupt","delSubtitle","getAlbums","getMetaInfoId","then","metaInfoId","getMetaInfo","page","_callee3","pageToken","response","_context3","request","path","method","params","status","result","concat","sort","l","r","localeCompare","nextPageToken","_callee4","albumId","_context4","_callee5","itemId","_context5","onDropAccepted","files","file","reader","FileReader","_ref6","_callee6","buf","encoding","vtt","_context6","arrayBufferToBuffer","chardet","detect","iconv","decode","name","endsWith","smi2vtt","subsrt","convert","format","replace","setSubtitle","_x5","readAsArrayBuffer","onDropRejected","_callee7","_context7","_callee8","drive","_context8","list","q","spaces","fields","mimeType","parents","t0","_callee9","_context9","setMetaInfo","_callee10","_context10","fileId","alt","JSON","parse","_callee11","_context11","uploadType","stringify","_callee12","_context12","_callee13","_context13","videoPlayer","_callee14","_context14","_callee15","_context15","aliasTimer","clearTimeout","setTimeout","content","App_TopBar","demo","List_default","ListItem_default","button","key","ListItemIcon_default","Folder_default","ListItemText_default","primary","videoItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","done","startsWith","push","return","videoListRender","_i","Grid_default","container","direction","justify","gridContainer","minHeight","CardContent_default","gutterBottom","i","baseUrl","type","baseStyle","borderWidth","borderColor","borderStyle","activeStyle","xs","padding","v","es","accept","_ref16","getRootProps","getInputProps","isDragActive","styles","objectSpread","assign","Delete_default","rightIcon","maxWidth","background","paper","margin","Boolean","location","hostname","match","ReactDOM","src_App_0","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.ef02e1cd.chunk.js","sourcesContent":["var map = {\n\t\"./ass.js\": 247,\n\t\"./json.js\": 248,\n\t\"./lrc.js\": 249,\n\t\"./sbv.js\": 250,\n\t\"./smi.js\": 251,\n\t\"./srt.js\": 252,\n\t\"./ssa.js\": 103,\n\t\"./sub.js\": 253,\n\t\"./vtt.js\": 254\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tvar id = map[req];\n\tif(!(id + 1)) { // check for number or string\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn id;\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 246;","import React from 'react';\nimport './App.css';\nimport videojs from 'video.js';\nimport 'video.js/dist/video-js.css';\nimport 'videojs-hotkeys/videojs.hotkeys';\n\n// The following registers the plugin with `videojs`\nrequire('silvermine-videojs-quality-selector')(videojs);\n\nclass VideoPlayer extends React.Component {\n  componentDidMount = () => {\n    this.props.onRef(this);\n    const app = this.props.app;\n    \n    this.player = videojs(this.videoNode, {\n      autoplay: true,\n      controls: true,\n      sources: this.props.sources,\n      aspectRatio: '16:9',\n      playbackRates: [0.5, 1, 1.25, 1.5, 2],\n      controlBar: {\n        children: [\n          'playToggle',\n          'volumePanel',\n          // 'currentTimeDisplay',\n          // 'durationDisplay',\n          'progressControl',\n          'subtitlesButton',\n          // 'CaptionsButton',\n          'playbackRateMenuButton',\n          'qualitySelector',\n          'fullscreenToggle',\n        ],\n      },\n    });\n\n    this.player.on('ready', () => {\n      // hotkey\n      this.player.hotkeys({\n        volumeStep: 0.1,\n        seekStep: 5,\n        enableModifiersForNumbers: false,\n      });\n      \n      // subtitle\n      new Promise(async (resolve, reject) => {\n        const folderId = await app.getFolderId(app.state.curItem.id);\n        const subtitleId = await app.getSubtitleId(folderId);\n        const subtitle = await app.getSubtitle(subtitleId);\n        if(subtitle)  this.updateSubtitle(subtitle);\n        resolve();\n      });\n    });\n    \n    this.player.on('error', err => {\n      console.error(err);\n      // assume error occurs because there's no correspond resolution\n      app.playNextRes();\n    });\n  }\n\n  updateSubtitle = subtitle => {\n    // remove previous one\n    let textTracks = this.player.textTracks();\n    if(textTracks.length > 0) {\n      this.player.removeRemoteTextTrack(textTracks[0]);\n    }\n\n    // use data url\n    this.player.addRemoteTextTrack({\n      src: 'data:text/plain,' + subtitle,\n      default: true,\n      srclang: 'ko',\n    }, false);\n\n    // show the new one\n    textTracks = this.player.textTracks();\n    textTracks[0].mode = 'showing';\n\n    // update for app\n    this.props.app.setState({subtitle});\n  }\n\n  // destroy player on unmount\n  componentWillUnmount() { if (this.player) this.player.dispose() }\n\n  render() {\n    // wrap the player in a div with a `data-vjs-player` attribute\n    // so videojs won't create additional wrapper in the DOM\n    // see https://github.com/videojs/video.js/pull/3856\n    return (\n      <div>\n        <div data-vjs-player>\n          <video\n            ref={ node => this.videoNode = node }\n            className=\"video-js\"\n            style={{fontSize: '13px'}}\n          />\n        </div>\n      </div>\n    )\n  }\n}\n\nexport default VideoPlayer;","import React, { Component } from 'react';\nimport './App.css';\nimport PropTypes from 'prop-types';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Icon from '@material-ui/core/Icon';\nimport IconButton from '@material-ui/core/IconButton';\nimport Typography from '@material-ui/core/Typography';\nimport 'typeface-roboto';\nimport InputBase from '@material-ui/core/InputBase';\nimport { fade } from '@material-ui/core/styles/colorManipulator';\nimport { withStyles } from '@material-ui/core/styles';\nimport MenuIcon from '@material-ui/icons/Menu';\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport FolderIcon from '@material-ui/icons/Folder';\nimport Grid from '@material-ui/core/Grid';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport DeleteIcon from '@material-ui/icons/Delete';\nimport Dropzone from 'react-dropzone';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport iconv from 'iconv-lite';\nimport packageJson from '../package.json';\nimport VideoPlayer from './player';\nimport chardet from 'chardet';\nimport arrayBufferToBuffer from 'arraybuffer-to-buffer';\nimport subsrt from 'subsrt';\nimport smi2vtt from 'smi2vtt/dist/parse';\n\n// Authorization scopes required by the API; multiple scopes can be\n// included, separated by spaces.\nvar SCOPES = 'https://www.googleapis.com/auth/drive.appdata';\nSCOPES += ' https://www.googleapis.com/auth/photoslibrary.readonly';\n\n// video resolutions\n// Video streaming is not officially supported for now.\n// The following is a trick from Picasa era.\n// '=m37' (1080p)\n// '=m22' (720p)\n// '=m18' (360p)\n// more info: https://wordpress.org/support/topic/google-photos-videos-not-playing-in-any-lightbox-type/    // server part\nconst resolutions = [\n  {postfix: '=m37', label: '1080p'},\n  {postfix: '=m22', label: '720p'},\n  {postfix: '=m18', label: '360p'},\n];\n\n// constants\nconst METAINFO_FILENAME = 'meta.json';\nconst SUBTITLE_FILENAME = 'captions.vtt';\nconst UPDATE_ALIAS_DELAY = 2;   // the time for which postpone remote update. (sec)\n\nclass LogoutDialog extends React.Component {\n  state = {\n    open: false,\n  };\n\n  componentDidMount = () => this.props.onRef(this)\n  handleClickOpen = () => this.setState({ open: true })\n  handleClose = () => this.setState({ open: false })\n  handleYes = () => {\n    const app = this.props.app;\n    this.setState({ open: false });\n    app.initUserVars();\n    app.gapi.auth2.getAuthInstance().signOut();\n  }\n\n  render() {\n    return (\n      <Dialog\n        open={this.state.open}\n        onClose={this.handleClose}\n        aria-labelledby=\"alert-dialog-title\"\n        aria-describedby=\"alert-dialog-description\"\n      >\n        <DialogTitle id=\"alert-dialog-title\">{\"Logout?\"}</DialogTitle>\n        <DialogContent>\n          {/* <DialogContentText id=\"alert-dialog-description\">\n            -\n          </DialogContentText> */}\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={this.handleYes} color=\"primary\">\n            Yes\n          </Button>\n        </DialogActions>\n      </Dialog>\n    );\n  }\n}\n\nconst topBarStyles = theme => ({\n  root: {\n    width: '100%',\n  },\n  grow: {\n    flexGrow: 1,\n  },\n  menuButton: {\n    marginLeft: -12,\n    marginRight: 20,\n  },\n  title: {\n    display: 'none',\n    [theme.breakpoints.up('sm')]: {\n      display: 'block',\n    },\n  },\n  search: {\n    position: 'relative',\n    borderRadius: theme.shape.borderRadius,\n    backgroundColor: fade(theme.palette.common.white, 0.15),\n    '&:hover': {\n      backgroundColor: fade(theme.palette.common.white, 0.25),\n    },\n    marginLeft: 0,\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      marginLeft: theme.spacing.unit,\n      width: 'auto',\n    },\n  },\n  searchIcon: {\n    width: theme.spacing.unit * 9,\n    height: '100%',\n    position: 'absolute',\n    pointerEvents: 'none',\n    display: 'flex',\n    alignItems: 'center',\n    justifyContent: 'center',\n  },\n  inputRoot: {\n    color: 'inherit',\n    width: '100%',\n  },\n  inputInput: {\n    paddingTop: theme.spacing.unit,\n    paddingRight: theme.spacing.unit,\n    paddingBottom: theme.spacing.unit,\n    paddingLeft: theme.spacing.unit * 10,\n    transition: theme.transitions.create('width'),\n    width: '100%',\n    [theme.breakpoints.up('sm')]: {\n      width: 120,\n      '&:focus': {\n        width: 200,\n      },\n    },\n  },\n});\n\nclass TopBar extends Component {\n  handleTopLeft = () => {\n    const app = this.props.app;\n    if(app.state.curPage === 'main') {\n      this.logoutDialog.setState({open: true});\n    } else if(app.state.curPage === 'album') {\n      app.changePage('main');\n    } else if(app.state.curPage === 'play') {\n      app.changePage('album');\n    }\n  }\n  handleTitle = event => {\n    const alias = event.target.value;\n    const app = this.props.app;\n    app.setAlias(app.state.curItem.id, alias || app.state.curItem.filename);\n  }\n  render = () => {\n    const {classes} = this.props;\n    const app = this.props.app;\n  \n    // set title, top-left icon\n    let title, topLeft;\n    if(app.state.curPage === 'main') {\n      const auth2 =  app.gapi.auth2.getAuthInstance();\n      title = (\n        <Typography variant=\"h6\" color=\"inherit\" noWrap>\n          {auth2.currentUser.get().getBasicProfile().getEmail()} ({app.state.albums.length})\n        </Typography>\n      );\n      topLeft = <MenuIcon />;\n    } else if(app.state.curPage === 'album') {\n      title = (\n        <Typography variant=\"h6\" color=\"inherit\" noWrap>\n          {app.state.curAlbum.title} ({app.state.mediaItems.length})\n        </Typography>\n      );\n      topLeft = <Icon>arrow_back</Icon>;\n    } else if(app.state.curPage === 'play') {\n      const curItemMeta = app.state.metaInfo[app.state.curItem.id];\n      const aliasOrTitle = (curItemMeta && curItemMeta.alias) ?\n                  curItemMeta.alias : app.state.curItem.filename;\n      title = (\n        <InputBase\n          defaultValue={aliasOrTitle}\n          fullWidth\n          style={{color:'inherit'}}\n          onChange={event => this.handleTitle(event)}\n          placeholder={app.state.curItem.filename}\n        />\n      );\n      topLeft = <Icon>arrow_back</Icon>;\n    }\n    \n    return (\n      <div className={classes.root}>\n        <LogoutDialog onRef={d => {this.logoutDialog = d}} app={this.props.app} />\n        <AppBar position=\"fixed\">\n          <Toolbar>\n            <IconButton\n              className={classes.menuButton}\n              color=\"inherit\"\n              aria-label=\"Open drawer\"\n              onClick={() => this.handleTopLeft()}\n            >\n              {topLeft}\n            </IconButton>\n            {title}\n            {/* <div className={classes.grow} />\n            <div className={classes.search}>\n              <div className={classes.searchIcon}>\n                <SearchIcon />\n              </div>\n              <InputBase\n                placeholder=\"Searchâ€¦\"\n                classes={{\n                  root: classes.inputRoot,\n                  input: classes.inputInput,\n                }}\n              />\n            </div> */}\n          </Toolbar>\n        </AppBar>\n      </div>\n    );\n  }\n}\n\nTopBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n};\n\nTopBar = withStyles(topBarStyles)(TopBar);\n\nconst appStyles = theme => ({\n  root: {\n    flexGrow: 1,\n    maxWidth: '96vw',\n  },\n  demo: {\n    backgroundColor: theme.palette.background.paper,\n  },\n  title: {\n    margin: `${theme.spacing.unit * 4}px 0 ${theme.spacing.unit * 2}px`,\n  },\n});\n\nclass App extends Component {\n  state = {\n    isSignedIn: false,\n    curPage: 'loading',\n  }\n\n  initUserVars = () => {\n    this.albums = [];\n    this.mediaItems = [];\n    this.setState({\n      albums: [],\n      curAlbum: {},\n      mediaItems: [],\n      curItem: null,\n      nextResIdx: 0,   // resolution index to try\n      refreshPlayer: false,     // a trigger to refresh video player\n      subtitle: '',\n      metaInfo: {},\n    });\n  }\n\n  componentDidMount = () => {\n    // init user variables\n    this.initUserVars();\n    \n    // The same as state.albums.\n    // This is intermediate storage for fetching all albums.\n    this.albums = [];\n  \n    let script;\n\n    // google apis\n    script = document.createElement('script');\n    script.src = 'https://apis.google.com/js/api.js';\n    script.onload = () => {\n      this.gapi = window.gapi;\n      this.gapi.load('client:auth2', async () => {\n        // init\n        await this.gapi.client.init({\n          apiKey: packageJson.API_KEY,\n          clientId: packageJson.CLIENT_ID,\n          discoveryDocs: packageJson.DISCOVERY_DOCS,\n          scope: SCOPES,\n        });\n        \n        // Set listener\n        this.gapi.auth2.getAuthInstance().isSignedIn.listen(this.updateSigninStatus);\n\n        // Handle the initial sign-in state.\n        this.updateSigninStatus(this.gapi.auth2.getAuthInstance().isSignedIn.get());\n      });\n    };\n    document.body.appendChild(script);\n  }\n\n  handleSigninClick = event => this.gapi.auth2.getAuthInstance().signIn()\n  handleSignoutClick = event => this.gapi.auth2.getAuthInstance().signOut()\n  handleAlbumClick = album => {\n    this.getMediaItems(album.id);\n    this.setState({curAlbum: album});\n    this.changePage('album');\n  }\n  handleItemClick = item => {\n    this.getMediaItem(item.id);\n    this.changePage('play');\n  }\n  handleDelSubtitleClick = async () => {\n    const folderId = await this.getFolderId(this.state.curItem.id);\n    const subtitleId = await this.getSubtitleId(folderId);\n    return this.delSubtitle(subtitleId);\n  }\n  \n  updateSigninStatus = isSignedIn => {\n    if(isSignedIn) {\n      // go to main page\n      this.changePage('main');\n\n      // fetch album list\n      this.getAlbums();\n\n      // fetch metaInfo\n      this.getMetaInfoId().then(metaInfoId => {\n        // save to class also\n        this.metaInfoId = metaInfoId;\n\n        // get the body\n        this.getMetaInfo(metaInfoId);\n      });\n    } else {\n      this.changePage('signin');\n    }\n    this.setState({isSignedIn});\n  }\n\n  changePage = page => {\n    let state = {curPage: page};\n\n    // clean up when leaving 'play'\n    if(this.state.curPage === 'play') {\n      //-- leaving play --//\n      state.curItem = null;\n      state.nextResIdx = 0;\n      state.subtitle = '';\n    }\n\n    this.setState(state);\n  }\n\n  getAlbums = async pageToken => {\n    let response;\n    \n    if(pageToken) {\n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/albums',\n        method: 'GET',\n        params: {pageToken},\n      });\n    } else {\n      // init\n      this.albums = [];\n\n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/albums',\n        method: 'GET',\n      });\n    }\n\n    // response\n    if(response.status === 200) {\n      //-- success --//\n      let albums = response.result.albums;\n\n      // append to previous one\n      this.albums = this.albums.concat(albums);\n\n      // sort\n      this.albums.sort((l, r) => ('' + l.title).localeCompare(r.title));\n\n      // save\n      this.setState({albums: this.albums});\n\n      // request next page\n      if(response.result.nextPageToken) {\n        this.getAlbums(response.result.nextPageToken);\n      }\n    } else {\n      //-- error --//\n      console.error(response);\n    }\n  }\n\n  getMediaItems = async (albumId, pageToken) => {\n    let response;\n\n    if(pageToken) {\n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/mediaItems:search',\n        method: 'POST',\n        params: {albumId, pageToken},\n      });\n    } else {\n      // init\n      this.mediaItems = [];\n      \n      // request\n      response = await this.gapi.client.request({\n        path: 'https://photoslibrary.googleapis.com/v1/mediaItems:search',\n        method: 'POST',\n        params: {albumId},\n      });\n    }\n\n    // response\n    if(response.status === 200) {\n      //-- success --//\n      const mediaItems = response.result.mediaItems;\n\n      // append to previous one\n      this.mediaItems = this.mediaItems.concat(mediaItems);\n\n      // save\n      this.setState({mediaItems: this.mediaItems});\n\n      // request next page\n      if(response.result.nextPageToken) {\n        this.getMediaItems(albumId, response.result.nextPageToken);\n      }\n    } else {\n      //-- error --//\n      console.error(response);\n    }\n  }\n\n  getMediaItem = async itemId => {\n    const response = await this.gapi.client.request({\n      path: 'https://photoslibrary.googleapis.com/v1/mediaItems/' + itemId,\n      method: 'GET',\n    });\n    if(response.status === 200) {\n      //-- success --//\n      this.setState({curItem: response.result});\n    } else {\n      //-- error --//\n      console.error(response);\n    }\n  }\n\n  onDropAccepted = files => {\n    const file = files[0];\n    const reader = new FileReader();\n\n    reader.onload = async event => {\n      let buf = arrayBufferToBuffer(reader.result);\n      const encoding = chardet.detect(buf);\n      \n      // adjust encoding\n      buf = iconv.decode(buf, encoding);\n      \n      // convert to .vtt\n      let vtt;\n      if(file.name.endsWith('.smi')) {\n        vtt = smi2vtt(buf);\n      } else {\n        vtt = subsrt.convert(buf, {format: 'vtt'});\n      }\n      \n      // `subsrt` produces timestamp using comma(,). Fix it.\n      vtt = vtt.replace(/([0-9]),([0-9])/g, '$1.$2');\n\n      // upload\n      const folderId = await this.getFolderId(this.state.curItem.id);\n      const subtitleId = await this.getSubtitleId(folderId);\n      await this.setSubtitle(subtitleId, vtt);\n    }\n\n    reader.readAsArrayBuffer(file);\n  }\n\n  \n  \n  onDropRejected = files => {\n    console.error('Rejected:', files);\n  }\n\n  playNextRes = async () => {\n    // unmount video player\n    await this.setState({refreshPlayer: true});\n\n    // remount with next resolution list\n    this.setState({nextResIdx: this.state.nextResIdx+1, refreshPlayer: false});\n  }\n\n  // get the id of folder that contains some data for 'item' in Drive\n  getFolderId = async itemId => {\n    const drive = this.gapi.client.drive;\n    let response, folderId;\n\n    // check if the folder exists\n    response = await drive.files.list({\n      // parents: ['appDataFolder'],\n      q: 'name=\"' + itemId + '\" and mimeType=\"application/vnd.google-apps.folder\"',\n      spaces: 'appDataFolder',\n      fields: 'files(id, name, mimeType)',\n    });\n    const files = response.result.files;\n    if (files && files.length > 0) {\n      //-- found --//\n      folderId = files[0].id;\n    } else {\n      //-- not found --//\n      // create one\n      response = await drive.files.create({\n        name: itemId,\n        mimeType: 'application/vnd.google-apps.folder',\n        parents: ['appDataFolder'],\n        fields: 'id',\n      });\n      switch(response.status) {\n        case 200:\n          const file = response.result;\n          folderId = file.id;\n          break;\n        default:\n          console.error('Error creating the folder, ', response);\n          break;\n      }\n    }\n\n    return folderId;\n  }\n\n  // get the metaInfo id\n  getMetaInfoId = async () => {\n    const drive = this.gapi.client.drive;\n    let response, metaInfoId;\n\n    // check if the folder exists\n    response = await drive.files.list({\n      q: 'name=\"' + METAINFO_FILENAME + '\"',\n      spaces: 'appDataFolder',\n      fields: 'files(id)',\n    });\n    const files = response.result.files;\n    if (files && files.length > 0) {\n      //-- found --//\n      metaInfoId = files[0].id;\n    } else {\n      //-- not found --//\n      // create one\n      response = await drive.files.create({\n        name: METAINFO_FILENAME,\n        parents: ['appDataFolder'],\n      });\n      switch(response.status) {\n        case 200:\n          const file = response.result;\n          metaInfoId = file.id;\n\n          // init\n          await this.setMetaInfo(metaInfoId, {});\n          break;\n        default:\n          console.error('Error creating the folder, ', response);\n          break;\n      }\n    }\n\n    return metaInfoId;\n  }\n\n  // get the meta info\n  getMetaInfo = async metaInfoId => {\n    const drive = this.gapi.client.drive;\n    let response, metaInfo = {};\n    \n    // download\n    response = await drive.files.get({\n      fileId: metaInfoId,\n      alt: 'media'\n    });\n    switch(response.status) {\n      case 200:\n        metaInfo = JSON.parse(response.body);\n        this.setState({metaInfo});\n        break;\n      default:\n        console.error('Error creating the folder, ', response);\n        break;\n    }\n  }\n\n  // set meta info(overwrite)\n  // metaInfo: {}\n  setMetaInfo = async (metaInfoId, metaInfo) => {\n    // write\n    const response = await this.gapi.client.request({\n      path: '/upload/drive/v3/files/' + metaInfoId,\n      method: 'PATCH',\n      params: {\n        uploadType: 'media'\n      },\n      body: JSON.stringify(metaInfo)\n    });\n    switch(response.status) {\n      case 200:\n        break;\n      default:\n        console.error('Error getting meta info', response);\n        throw new Error('Error getting meta info');\n    }\n  }\n\n  getSubtitleId = async folderId => {\n    const drive = this.gapi.client.drive;\n    let response, subtitleId;\n\n    // check if the folder exists\n    response = await drive.files.list({\n      parents: [folderId],\n      q: 'name=\"' + SUBTITLE_FILENAME + '\" and \"' + folderId + '\" in parents',\n      spaces: 'appDataFolder',\n      fields: 'files(id, webContentLink, webViewLink)',\n    });\n    const files = response.result.files;\n    if (files && files.length > 0) {\n      //-- found --//\n      subtitleId = files[0].id;\n    } else {\n      //-- not found --//\n      // create one\n      response = await drive.files.create({\n        name: SUBTITLE_FILENAME,\n        // mimeType: 'application/vnd.google-apps.folder',\n        parents: [folderId],\n        // fields: 'id',\n      });\n      switch(response.status) {\n        case 200:\n          const file = response.result;\n          subtitleId = file.id;\n          break;\n        default:\n          console.error('Error creating the folder, ', response);\n          break;\n      }\n    }\n\n    return subtitleId;\n  }\n\n  setSubtitle = async (subtitleId, subtitle) => {\n    const response = await this.gapi.client.request({\n      path: '/upload/drive/v3/files/' + subtitleId,\n      method: 'PATCH',\n      params: {\n        uploadType: 'media'\n      },\n      body: subtitle\n    });\n    switch(response.status) {\n      case 200:\n        // update subtitle on the fly\n        if(this.state.curPage === 'play') {\n          this.videoPlayer.updateSubtitle(subtitle);\n        }\n        break;\n      default:\n      console.error('Error setting subtitle', response);\n      throw new Error('Error setting subtitle');\n    }\n  }\n\n  // just make it empty\n  delSubtitle = subtitleId => this.setSubtitle(subtitleId, '')\n\n  getSubtitle = async subtitleId => {\n    const drive = this.gapi.client.drive;\n    let response, subtitle = '';\n    \n    // download\n    response = await drive.files.get({\n      fileId: subtitleId,\n      alt: 'media'\n    });\n    switch(response.status) {\n      case 200:\n        subtitle = response.body;\n        break;\n      default:\n        console.error('Error creating the folder, ', response);\n        break;\n    }\n\n    return subtitle;\n  }\n\n  setAlias = async (itemId, alias) => {\n    // cancel previous timer\n    if(this.aliasTimer)   clearTimeout(this.aliasTimer);\n\n    // set new one\n    this.aliasTimer = setTimeout(() => {\n      // local update\n      let metaInfo = this.state.metaInfo;\n      if(metaInfo[itemId]) {\n        metaInfo[itemId].alias = alias;   // add\n      } else {\n        metaInfo[itemId] = {alias};       // new\n      }\n      this.setState({metaInfo});\n\n      // remote update\n      this.setMetaInfo(this.metaInfoId, metaInfo);\n\n      // reinit\n      this.aliasTimer = null;\n    }, UPDATE_ALIAS_DELAY*1000);\n    \n  }\n\n  render = () => {\n    const { classes } = this.props;\n    let content;\n\n    if(this.state.curPage === 'loading') {\n      content = (<div>Loading</div>);\n    } else if(this.state.curPage === 'signin') {\n      content = (\n        <Button\n          variant=\"outlined\"\n          color=\"primary\"\n          onClick={() => this.handleSigninClick()}\n        >\n          Sign In\n        </Button>\n      );\n    } else if(this.state.curPage === 'main') {\n      //-- list albums --//\n      content = (\n        <div>\n          <TopBar app={this}/>\n          <div className={classes.demo}>\n            <List>\n              {this.state.albums.map(album =>\n                <ListItem\n                  button\n                  onClick={() => this.handleAlbumClick(album)}\n                  key={album.id}\n                >\n                  <ListItemIcon>\n                    <FolderIcon />\n                  </ListItemIcon>\n                  <ListItemText\n                    primary={album.title}\n                  />\n                </ListItem>\n              )}\n            </List>\n          </div>\n        </div>\n      );\n    } else if(this.state.curPage === 'album') {\n      //-- list video items --//\n      let mediaItems = this.state.mediaItems;\n\n      // filter out non-video items\n      let videoItems = [];\n      for(let item of mediaItems) {\n        if(item.mimeType.startsWith('video')) {\n          videoItems.push(item);\n        }\n      }\n\n      // attach aliases\n      const metaInfo = this.state.metaInfo;\n      for(let item of videoItems) {\n        if(item.mimeType.startsWith('video')) {\n          if(item.id in metaInfo && metaInfo[item.id].alias) {\n            item.alias = metaInfo[item.id].alias;\n          }\n        }\n      }\n\n      // sort\n      videoItems.sort((l, r) => (\n        '' + (l.alias || l.filename)).localeCompare(r.alias || r.filename)\n      );\n\n      // build video list rendering\n      let videoListRender;\n      if(videoItems.length > 0) {\n        // more than 0 items\n        videoListRender = (\n          <List>\n            {videoItems.map(item =>\n              <ListItem\n                button\n                onClick={() => this.handleItemClick(item)}\n                key={item.id}\n              >\n                <ListItemIcon>\n                  <Icon>movie</Icon>\n                </ListItemIcon>\n                <ListItemText\n                  primary={item.alias || item.filename}\n                />\n              </ListItem>\n            )}\n          </List>\n        );\n      } else {\n        // no item\n        videoListRender = (\n          <Grid\n            container\n            direction='column'\n            justify='space-between'\n            alignItems='center'\n            className={classes.gridContainer}\n            style={{minHeight: '100vh'}}\n          >\n            <Grid item></Grid>\n            <Grid item>\n              <CardContent>\n                <Typography gutterBottom style={{fontSize: '10vw'}}>\n                  í…… ë¹„ì—ˆìŒ!\n                </Typography>\n              </CardContent>\n            </Grid>\n            <Grid item></Grid>\n          </Grid>\n        );\n      }\n\n      // list media items in an album\n      content = (\n        <div>\n          <TopBar app={this} />\n          <div className={classes.demo}>\n            {videoListRender}\n          </div>\n        </div>\n      );\n    } else if(this.state.curPage === 'play') {\n      //-- play the video --//\n      if(this.state.curItem) {\n        if(this.state.nextResIdx >= resolutions.length) {\n          console.error('no resolution available');\n          return;\n        }\n\n        // setup sources\n        const item = this.state.curItem;\n        let sources = [];\n        for(let i=this.state.nextResIdx;i<resolutions.length;i++) {\n          sources.push({\n            src: item.baseUrl + resolutions[i].postfix,\n            type: item.mimeType,\n            label: resolutions[i].label,\n          });\n        }\n\n        // dropzone styles\n        const baseStyle = {\n          // width: 480,\n          height: 100,\n          borderWidth: 5,\n          borderColor: '#666',\n          borderStyle: 'dashed',\n          borderRadius: 5\n        };\n        const activeStyle = {\n          borderStyle: 'solid',\n          borderColor: '#6c6',\n          backgroundColor: '#eee'\n        };\n\n        content = (\n          <div>\n            <TopBar app={this} />\n            <div className={classes.demo}>\n              <Grid\n                container\n                direction='row'\n                justify='space-evenly'\n                alignItems='center'\n                className={classes.gridContainer}\n              >\n                <Grid item xs={12} style={{padding:10}}>\n                  {!this.state.refreshPlayer &&\n                    <VideoPlayer\n                      onRef={v => {this.videoPlayer = v}}\n                      sources={sources} app={this}\n                    />\n                  }\n                </Grid>\n                <Grid item xs={8} style={{padding:10}}>\n                  <Dropzone\n                    accept={['.smi', '.srt', '.vtt']}\n                    onDropAccepted={this.onDropAccepted}\n                    onDropRejected={this.onDropRejected}\n                  >\n                    {({getRootProps, getInputProps, isDragActive}) => {\n                      let styles = {...baseStyle};\n                      styles = isDragActive ? {...styles, ...activeStyle} : styles;\n                      return (\n                        <div\n                          {...getRootProps()}\n                          style={styles}\n                        >\n                          <input {...getInputProps()} />\n                          <Grid\n                            container\n                            justify='center'\n                            alignItems='center'\n                            style={{height:'100%'}}\n                          >\n                            <Grid item>\n                              <Typography variant=\"h4\">\n                                <Icon fontSize='large'>subtitles</Icon>\n                                {this.state.subtitle ? 'ìžë§‰ ìžˆìŒ' : 'ìžë§‰ ëŒì–´ë†“ê¸°'}\n                              </Typography>\n                            </Grid>\n                          </Grid>\n                        </div>\n                      )\n                    }}\n                  </Dropzone>\n                </Grid>\n                {this.state.subtitle &&\n                  <Grid item xs={4}>\n                    <Button\n                      variant=\"outlined\"\n                      color=\"secondary\"\n                      onClick={() => this.handleDelSubtitleClick()}\n                    >\n                      <DeleteIcon className={classes.rightIcon} />\n                      ìžë§‰ ì‚­ì œ\n                    </Button>\n                  </Grid>\n                }\n              </Grid>\n            </div>\n          </div>\n        );\n      } else {\n        content = <div>ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘</div>;\n      }\n    }\n    \n    return (\n      <div className=\"App\">\n        <div style={{height: 56}}></div>\n        {content}\n      </div>\n    );\n  }\n}\n\nexport default withStyles(appStyles)(App);","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See http://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}